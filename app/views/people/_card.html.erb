<% id = persona["id"] %>
<% full_name = "#{persona["nombre"]} #{persona["apellido"]}" %>
<% con_art   = persona["tiene_articulos"] ? "Con artÃ­culos" : "Sin artÃ­culos" %>

<div class="person-card card-link">
  <div class="card-head person-row">
    <div class="avatar"><span>ğŸ‘¤</span></div>
    <div class="title-wrap">
      <h3 class="card-title"><%= full_name %></h3>
      <% if persona.key?("tiene_articulos") %>
        <span class="badge <%= persona["tiene_articulos"] ? "badge-assigned" : "badge-free" %>">
          <%= con_art %>
        </span>
      <% end %>
    </div>
  </div>

  <div class="card-actions">
    <%= link_to person_path(id),
        class: "icon-btn", data: { turbo: false }, title: "Ver", aria: { label: "Ver" } do %>
      <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/></svg>
      <span class="sr-only">Ver</span>
    <% end %>

    <%= link_to new_person_path(id:, nombre: persona["nombre"], apellido: persona["apellido"]),
        class: "icon-btn", data: { turbo: false }, title: "Editar", aria: { label: "Editar" } do %>
      <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"/></svg>
      <span class="sr-only">Editar</span>
    <% end %>

    <%= link_to person_path(id),
        class: "icon-btn danger", title: "Eliminar",
        data: { turbo_method: :delete, turbo_confirm: "Â¿Eliminar/archivar esta persona?" } do %>
      <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M6 7h12v2H6V7zm2 3h8l-1 10H9L8 10zm3-5h2v2h-2V5z"/></svg>
      <span class="sr-only">Eliminar</span>
    <% end %>
  </div>
</div>
