<% editing = @prefill.present? && @prefill["id"].present? %>

<a href="<%= people_path %>" class="back-link">‚Üê Volver</a>
<h1 class="page-title"><%= editing ? "Editar persona" : "Agregar persona" %></h1>
<p class="help"><%= editing ? "Modifica los datos de la persona" : "Crea una nueva persona" %></p>

<%= form_with url: (editing ? person_path(@prefill["id"]) : people_path),
              method: (editing ? :put : :post),
              local: true do %>
  <div class="card">
    <div class="form-grid" style="grid-template-columns:1fr 1fr;">
      <div class="form-row">
        <label class="required">Nombre</label>
        <%= text_field_tag "persona[nombre]", (@prefill&.[]("nombre") || ""), class: "input", required: true %>
      </div>
      <div class="form-row">
        <label class="required">Apellido</label>
        <%= text_field_tag "persona[apellido]", (@prefill&.[]("apellido") || ""), class: "input", required: true %>
      </div>
      <div class="form-row">
        <label class="required">Identificador (DNI)</label>
        <%= text_field_tag "persona[identificador]", (@prefill&.[]("identificador") || ""), class: "input", required: true %>
      </div>
    </div>

    <div class="form-actions">
      <%= submit_tag (editing ? "Editar" : "Crear"), class: "btn btn-primary" %>
      <%= link_to "Cancelar", people_path, class: "btn" %>
    </div>
  </div>
<% end %>