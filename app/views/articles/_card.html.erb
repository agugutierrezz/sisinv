<% asignado = articulo.persona_actual.present? %>
<article class="card article-card"
         data-name="<%= [
           articulo.identificador,
           articulo.marca&.nombre,
           articulo.modelo&.nombre,
           (articulo.persona_actual ? "#{articulo.persona_actual.nombre} #{articulo.persona_actual.apellido}" : "")
         ].compact.join(" ").downcase %>">
  <div class="card-head">
    <h3 class="card-title"><%= articulo.identificador %></h3>
    <span class="badge <%= asignado ? 'badge-assigned' : 'badge-free' %>">
      <%= asignado ? "Asignado" : "Disponible" %>
    </span>
  </div>

  <p class="muted"><strong><%= articulo.marca&.nombre %></strong> â€“ <%= articulo.modelo&.nombre %></p>
  <p class="muted">Ingresado: <%= l(Date.parse(articulo.fecha_ingreso.to_s)) %></p>

  <p class="<%= asignado ? '' : 'muted' %>">
    <% if asignado %>
      <span>ðŸ‘¤</span>
      <%= "#{articulo.persona_actual.nombre} #{articulo.persona_actual.apellido}" %>
    <% else %>
      Sin asignar
    <% end %>
  </p>

  <div class="card-actions">
    <%= link_to article_path(articulo.id),
        class: "icon-btn", data: { turbo: false }, title: "Ver detalles", aria: { label: "Ver detalles" } do %>
      <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
      </svg>
      <span class="sr-only">Ver detalles</span>
    <% end %>

    <%= link_to edit_article_path(articulo.id),
        class: "icon-btn", data: { turbo: false }, title: "Editar", aria: { label: "Editar" } do %>
      <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"/>
      </svg>
      <span class="sr-only">Editar</span>
    <% end %>
    
    <%= link_to article_path(articulo.id),
        class: "icon-btn danger", title: "Eliminar",
        data: { turbo_method: :delete, turbo_confirm: "Â¿Eliminar este artÃ­culo?" } do %>
      <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M6 7h12v2H6V7zm2 3h8l-1 10H9L8 10zm3-5h2v2h-2V5z"/>
      </svg>
      <span class="sr-only">Eliminar</span>
    <% end %>
  </div>
</article>
